<% if (locals.data && locals.profiles) { %>
  <div class="carousel-container container">
    <% locals.data.forEach((person, index) => { %>
      <!-- add hidden class to all cards but the first -->
      <!-- 'scroll' the carousel by adding/removing hidden class by ID set below -->
      <div class="main-content p-5 my-3 card-content <%= index === 0 ? '' : 'hidden' %>" id="card-<%= index %>" id="card-<%= index %>">
        <% if (person.name === 'first card') { %>
          <img src="/images/astronaut.png" width="200" height="150" class="mb-3" style="border-radius: 1rem;">
          <h2 class="text-white main-text mb-3"><%= person.displayMessage %></h2>
          <h2 class="text-white main-text mb-3"><%= person.scrollMessage %></h2>
        <% } else { %>
          <% var astro = profiles.filter(p => p.name === person.name) %>
          <img src="<%= astro[0].image?.image_url %>" width="200" height="200" class="mb-3" style="border-radius: 1rem; object-fit: cover; object-position: top">
          <h2 class="text-white"><%= astro[0].name %></h2>
          <p class="text-white"><em><%= astro[0].agency?.name %></em></p>
          <p class="text-white mb-0">Age: <%= astro[0].age %></p>
          <p class="text-white mb-0">Nationality: <%= astro[0].nationality[0]?.nationality_name %></p>
          <p class="text-white mb-0">No. of Flights: <%= astro[0].flights_count %></p>
          <p class="text-white">No. of spacewalks: <%= astro[0].spacewalks_count %></p>
          <p class="text-white"><%= astro[0].bio %></p>
        <% } %>
        <%- include("./partials/card-scroll-buttons.ejs", { index: index, data: data })  %>
      </div>
    <% }) %>
  </div>
<% } else { %>
  <h2>Check back later!</h2>
<% } %>
